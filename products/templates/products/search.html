{% extends 'products/base.html' %} {# Assuming you have a base.html #}
{% load static %}

{% block title %}Search Results for "{{ query }}"{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8">Search Results for "<span class="text-red-600">{{ query }}</span>"</h1>

    {% if products or categories or blogs or videos %}

        {% if products %}
        <h2 class="text-2xl font-semibold mb-4 border-b pb-2">Products</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8">
            {% for product in products %}
            <a href="/products/{{ product.slug }}/" class="block border rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 overflow-hidden">
                {% if product.main_image %}
                <img src="{{ product.main_image.url }}" alt="{{ product.name }}" class="w-full h-48 object-cover">
                {% else %}
                <div class="w-full h-48 bg-gray-200 flex items-center justify-center text-gray-500">No Image</div>
                {% endif %}
                <div class="p-4">
                    <h3 class="font-semibold text-lg mb-1">{{ product.name }}</h3>
                    <p class="text-gray-700">â‚¹{{ product.offer_price|floatformat:2 }}</p>
                    <p class="text-sm text-gray-500 mt-1">
                        {% if product.is_universal %}
                            Fits All Bikes
                        {% else %}
                            Fits: {% for bike in product.bike_models.all %}{{ bike.name }}{% if not forloop.last %}, {% endif %}{% endfor %}
                        {% endif %}
                    </p>
                </div>
            </a>
            {% endfor %}
        </div>
        {% endif %}

        {% if categories %}
        <h2 class="text-2xl font-semibold mb-4 border-b pb-2">Categories</h2>
        <ul class="list-disc list-inside mb-8">
            {% for category in categories %}
            <li class="mb-2"><a href="/products/?category={{ category.name|urlencode }}" class="text-blue-600 hover:underline text-lg">{{ category.name }}</a></li>
            {% endfor %}
        </ul>
        {% endif %}

        {% if blogs %}
        <h2 class="text-2xl font-semibold mb-4 border-b pb-2">Blogs</h2>
        <ul class="list-disc list-inside mb-8">
            {% for blog in blogs %}
            <li class="mb-2"><a href="/blog/{{ blog.slug }}/" class="text-blue-600 hover:underline text-lg">{{ blog.title }}</a></li>
            {% endfor %}
        </ul>
        {% endif %}

        {% if videos %}
        <h2 class="text-2xl font-semibold mb-4 border-b pb-2">Videos</h2>
        <ul class="list-disc list-inside mb-8">
            {% for video in videos %}
            <li class="mb-2"><a href="/blog/#video-{{ video.id }}" class="text-blue-600 hover:underline text-lg">{{ video.title }}</a></li>
            {% endfor %}
        </ul>
        {% endif %}

    {% else %}
    <p class="text-gray-600 text-lg">No results found for "{{ query }}". Please try a different search term.</p>
    {% endif %}
</div>
{% endblock %}